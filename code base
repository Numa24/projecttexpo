import time
import random

def typing_speed_test():
    # Sentences for each level
    levels = {
        "beginner": [
            "The sun rises in the east.",
            "Python is easy to learn.",
            "Practice makes perfect.",
            "Keep calm and type on.",
            "Typing is a fun skill."
        ],
        "intermediate": [
            "Computers are an integral part of our daily lives.",
            "Typing tests are a great way to improve accuracy and speed.",
            "Learning new skills can be challenging but rewarding.",
            "Programming languages like Python are versatile and powerful.",
            "Technology continues to shape the modern world."
        ],
        "advanced": [
            "Artificial intelligence is revolutionizing industries across the globe.",
            "A journey of a thousand miles begins with a single step, as they say.",
            "Understanding complex algorithms requires patience and practice.",
            "Theoretical physics and quantum mechanics are fascinating fields of study.",
            "Effective communication is the cornerstone of success in any endeavor."
        ]
    }

    # Ask players to choose a level
    print("Welcome to the Typing Speed Test: Multiplayer Edition!")
    print("Choose a difficulty level: beginner, intermediate, or advanced.")
    level = input("Enter your choice: ").strip().lower()

    # Validate level choice
    if level not in levels:
        print("Invalid choice. Defaulting to beginner level.")
        level = "beginner"

    # Randomly select a sentence based on chosen level
    sentence = random.choice(levels[level])
    print(f"\nBoth players will type the following sentence ({level.capitalize()} Level):")
    print(f"\n\033[1m{sentence}\033[0m")  # Bold formatting

    # Results storage
    results = {}

    # Typing test for each player
    for player in [1, 2]:
        print(f"\nPlayer {player}, get ready!")
        input("Press Enter when you are ready...")
        start_time = time.time()

        # Take the player's input
        typed_text = input("\nStart typing: ")

        # End the timer
        end_time = time.time()

        # Calculate typing speed and accuracy
        elapsed_time = end_time - start_time
        words_per_minute = len(typed_text.split()) / (elapsed_time / 60)
        accuracy = sum(1 for a, b in zip(typed_text, sentence) if a == b) / len(sentence) * 100

        # Store results
        results[player] = {
            "time": elapsed_time,
            "wpm": words_per_minute,
            "accuracy": accuracy,
        }

        print(f"\nPlayer {player}'s Results:")
        print(f"Time Taken: {elapsed_time:.2f} seconds")
        print(f"Words Per Minute (WPM): {words_per_minute:.2f}")
        print(f"Accuracy: {accuracy:.2f}%")

    # Compare results and declare the winner
    print("\n--- Final Results ---")
    for player, result in results.items():
        print(f"Player {player}: Time = {result['time']:.2f}s, WPM = {result['wpm']:.2f}, Accuracy = {result['accuracy']:.2f}%")

    if results[1]["wpm"] > results[2]["wpm"]:
        print("\nPlayer 1 wins by typing faster!")
    elif results[1]["wpm"] < results[2]["wpm"]:
        print("\nPlayer 2 wins by typing faster!")
    else:
        print("\nIt's a tie in typing speed!")

    if results[1]["accuracy"] > results[2]["accuracy"]:
        print("Player 1 wins with higher accuracy!")
    elif results[1]["accuracy"] < results[2]["accuracy"]:
        print("Player 2 wins with higher accuracy!")
    else:
        print("It's a tie in accuracy!")

if __name__ == "__main__":
    typing_speed_test()
